\documentclass[oneside]{book}

\usepackage{ifthen}
\newboolean{draft}
\setboolean{draft}{false}
\newcommand{\IfDraft}[1]{\ifthenelse{\boolean{draft}}{#1}{}}
\newcommand{\IfNotDraft}[1]{\ifthenelse{\boolean{draft}}{}{#1}}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[russian]{babel}
\usepackage[a4paper]{geometry}
\usepackage[usenames,dvipsnames]{color}
\usepackage[svgnames,dvipsnames]{xcolor}

\usepackage{tikz}
\usetikzlibrary{arrows,backgrounds,calc,positioning,trees}
\usepackage{pgfplots}

\usepackage{graphicx}

\usepackage{indentfirst}
\usepackage{booktabs}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{caption}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{varioref}
\usepackage{enumerate}
\usepackage{epigraph}

\hypersetup{
  colorlinks,
  citecolor=black,
  filecolor=black,
  linkcolor=black,
  urlcolor=black
}

\newenvironment{epistyle}{\setlength{\parindent}{1em}}{}
\renewcommand{\textflush}{epistyle}

\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{Gray}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}

\captionsetup[lstlisting]{
  format=listing,
  labelfont=white,
  textfont=white,
  singlelinecheck=false,
  margin=0pt,
  font={bf,footnotesize}}

\lstset{
  basicstyle=\footnotesize\ttfamily,
  numbers=left,
  numberstyle=\tiny,
  stepnumber=5,
  numbersep=5pt,
  tabsize=2,
  extendedchars=true,
  keywordstyle=\color{PineGreen},
  commentstyle=\color{NavyBlue},
  stringstyle=\color{Orange},
  xleftmargin=25pt,
  breaklines=true,
  breakatwhitespace=false,
  showspaces=false,
  showtabs=false,
  captionpos=t,
}

\lstdefinestyle{plainstyle}{language=}
\lstnewenvironment{plainlst}[2]
  {\lstset{style=plainstyle,caption=#1,label=#2}}
  {}

\lstdefinestyle{cstyle}{language=C}
\lstnewenvironment{clst}[2]
  {\lstset{style=cstyle,caption=#1,label=#2}}
  {}

\lstdefinestyle{pystyle}{language=Python,mathescape}
\lstnewenvironment{pylst}[2]
  {\lstset{style=pystyle,caption=#1,label=#2}}
  {}

\lstdefinestyle{ocamlstyle}{language=[Objective]Caml,mathescape}
\lstnewenvironment{ocamllst}[2]
  {\lstset{style=ocamlstyle,caption=#1,label=#2}}
  {}

\lstdefinestyle{hsstyle}{language=Haskell}
\lstnewenvironment{hslst}[2]
  {\lstset{style=hsstyle,caption=#1,label=#2}}
  {}

\lstdefinestyle{clstyle}{language=Lisp}
\lstnewenvironment{cllst}[2]
  {\lstset{style=clstyle,caption=#1,label=#2}}
  {}

\title{Informatics Rescue}
\author{Вадим Шендер, Иван Чернецкий}

\begin{document}
\maketitle{}

\tableofcontents{}

\input{basic-ds.tex}
\input{python.tex}
\input{concurrent.tex}
\input{network.tex}
\input{advanced-ds.tex}
\input{cl.tex}
\input{ml.tex}

\end{document}
